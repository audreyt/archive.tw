<html><meta charset="utf-8">
<style>
body, html { padding: 0; margin: 0 }
textarea { width: 100%; height: 50%; padding: 0; margin: 0 }
</style>
<textarea autofocus id="input" onchange="convert()" onkeyup="convert()" onkeydown="convert()" style="background: #ddd">
</textarea>
<br>
<textarea id="output" readonly style="background: #000; color: white">
</textarea>
<script>
function convert(){
var x = document.getElementById('input').value;

  var out, i$, ref$, len$, ln, replace$ = ''.replace;
  out = '';
  for (i$ = 0, len$ = (ref$ = x.split(/\n+/)).length; i$ < len$; ++i$) {
    ln = ref$[i$];
    if (/^[üåêüìÖüè°]|^:::/.exec(ln)) {
	out += ln + "\n";
      continue;
    }
    if (/^((?:19|2[0-9])\d{2})-(1[012]|0[1-9])-(3[01]|[12][0-9]|0?[1-9])/.exec(ln)) {
      out += "# " + ln + "\n\n";
      continue;
    }
    if (/^\s+/.exec(ln)) {
      out += (replace$.call(ln, /^\s+/, '')) + "\n\n";
      continue;
    }
    if (/[Ôºö:]$/.exec(ln)) {
      out += "### " + (replace$.call(ln, /[Ôºö:]$\s+/, '')) + "\n";
      continue;
    }
    if (/^[Ôºà(]/.exec(ln)) {
	out += "> " + ln + "\n\n";
      continue;
    }
    if (/^[„Äê[]/.exec(ln)) {
	out += "\n" + ln + "\n\n";
      continue;
    }
    if (/\S/.exec(ln))  {
	out += ":::warning\n" + ln + "\n:::\n\n";
      continue;
    }
  }

document.getElementById('output').value = out;
}
</script>
